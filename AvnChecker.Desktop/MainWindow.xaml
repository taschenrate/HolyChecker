
<Window x:Class="AvnChecker.Desktop.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:shell="clr-namespace:System.Windows.Shell;assembly=PresentationFramework"
        xmlns:models="clr-namespace:AvnChecker.Desktop.Models"
        mc:Ignorable="d"
        Title="AvnChecker"
        Height="860"
        Width="1400"
        MinHeight="760"
        MinWidth="1180"
        WindowStyle="None"
        ResizeMode="CanResize"
        WindowStartupLocation="CenterScreen"
        Background="#090909">
    <shell:WindowChrome.WindowChrome>
        <shell:WindowChrome CaptionHeight="0"
                            ResizeBorderThickness="6"
                            CornerRadius="0"
                            GlassFrameThickness="0"
                            UseAeroCaptionButtons="False" />
    </shell:WindowChrome.WindowChrome>
    <Window.Resources>
        <SolidColorBrush x:Key="BgRoot" Color="#090909" />
        <SolidColorBrush x:Key="BgSidebar" Color="#0C0C0C" />
        <SolidColorBrush x:Key="BgMain" Color="#101112" />
        <SolidColorBrush x:Key="CardBg" Color="#131416" />
        <SolidColorBrush x:Key="CardBorder" Color="#242424" />
        <SolidColorBrush x:Key="Accent" Color="#FF9800" />
        <SolidColorBrush x:Key="AccentDark" Color="#2A1905" />
        <SolidColorBrush x:Key="TextMain" Color="#ECECEC" />
        <SolidColorBrush x:Key="TextMuted" Color="#9A9A9A" />

        <Style TargetType="TextBlock">
            <Setter Property="Foreground" Value="{StaticResource TextMain}" />
            <Setter Property="FontSize" Value="15" />
        </Style>

        <Style x:Key="PanelBorder" TargetType="Border">
            <Setter Property="Background" Value="{StaticResource CardBg}" />
            <Setter Property="BorderBrush" Value="{StaticResource CardBorder}" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="CornerRadius" Value="12" />
            <Setter Property="Padding" Value="16" />
            <Setter Property="Margin" Value="0,0,0,12" />
        </Style>

        <Style x:Key="NavButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="Foreground" Value="{StaticResource TextMuted}" />
            <Setter Property="BorderBrush" Value="#00000000" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Padding" Value="14,0" />
            <Setter Property="Height" Value="44" />
            <Setter Property="Margin" Value="0,0,0,8" />
            <Setter Property="HorizontalContentAlignment" Value="Left" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Root"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="9">
                            <ContentPresenter Margin="{TemplateBinding Padding}"
                                              HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                              VerticalAlignment="Center" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Root" Property="Background" Value="#171717" />
                                <Setter Property="Foreground" Value="#F0F0F0" />
                            </Trigger>
                            <Trigger Property="Background" Value="{x:Static Brushes.Orange}">
                                <Setter TargetName="Root" Property="Background" Value="{StaticResource AccentDark}" />
                                <Setter TargetName="Root" Property="BorderBrush" Value="#5C340A" />
                                <Setter Property="Foreground" Value="{StaticResource Accent}" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ActionButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#1F1203" />
            <Setter Property="Foreground" Value="#EFEFEF" />
            <Setter Property="BorderBrush" Value="#5B360B" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Padding" Value="14,7" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Root"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="8">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" Margin="{TemplateBinding Padding}" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Root" Property="BorderBrush" Value="{StaticResource Accent}" />
                                <Setter TargetName="Root" Property="Background" Value="#2A1803" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="TitleBarButtonStyle" TargetType="Button">
            <Setter Property="Width" Value="36" />
            <Setter Property="Height" Value="30" />
            <Setter Property="Margin" Value="6,0,0,0" />
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="Foreground" Value="#E8E8E8" />
            <Setter Property="BorderBrush" Value="#00000000" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Root"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="7">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Root" Property="Background" Value="#1E1E1E" />
                                <Setter TargetName="Root" Property="BorderBrush" Value="#2E2E2E" />
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="Root" Property="Opacity" Value="0.85" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="CloseTitleBarButtonStyle" TargetType="Button" BasedOn="{StaticResource TitleBarButtonStyle}">
            <Setter Property="Foreground" Value="#FFB5B5" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Root"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="7">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Root" Property="Background" Value="#5A1717" />
                                <Setter TargetName="Root" Property="BorderBrush" Value="#8A2727" />
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="Root" Property="Opacity" Value="0.85" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="DataGrid">
            <Setter Property="Background" Value="#0F0F10" />
            <Setter Property="Foreground" Value="{StaticResource TextMain}" />
            <Setter Property="BorderBrush" Value="{StaticResource CardBorder}" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="GridLinesVisibility" Value="Horizontal" />
            <Setter Property="HorizontalGridLinesBrush" Value="#242424" />
            <Setter Property="VerticalGridLinesBrush" Value="#242424" />
            <Setter Property="RowBackground" Value="#101011" />
            <Setter Property="AlternatingRowBackground" Value="#151516" />
            <Setter Property="HeadersVisibility" Value="Column" />
            <Setter Property="AutoGenerateColumns" Value="False" />
            <Setter Property="CanUserAddRows" Value="False" />
            <Setter Property="CanUserDeleteRows" Value="False" />
            <Setter Property="IsReadOnly" Value="True" />
        </Style>

        <Style x:Key="CircleLinkButtonStyle" TargetType="Button">
            <Setter Property="Width" Value="54" />
            <Setter Property="Height" Value="54" />
            <Setter Property="Foreground" Value="#F1F1F1" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="FontSize" Value="16" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Root"
                                CornerRadius="27"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Root" Property="Opacity" Value="0.9" />
                                <Setter TargetName="Root" Property="BorderBrush" Value="#E8E8E8" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid Background="{StaticResource BgRoot}">
        <Border x:Name="MainShell"
                Margin="10"
                Background="#0B0B0C"
                BorderBrush="#202020"
                BorderThickness="1"
                CornerRadius="14"
                Visibility="Hidden">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="230" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <Border Grid.Column="0" Background="{StaticResource BgSidebar}" BorderBrush="#202020" BorderThickness="0,0,1,0">
                    <DockPanel x:Name="NavMenuPanel" IsEnabled="False">
                        <StackPanel DockPanel.Dock="Top" Margin="0,14,0,0">
                            <StackPanel Margin="0,0,0,16" HorizontalAlignment="Center">
                                <Border Width="82" Height="82" CornerRadius="14" BorderBrush="{StaticResource Accent}" BorderThickness="1.5" Background="#120F07">
                                    <TextBlock Text="👻" FontSize="32" HorizontalAlignment="Center" VerticalAlignment="Center" />
                                </Border>
                                <TextBlock Text="HolyChecker" Foreground="{StaticResource Accent}" FontSize="34" FontWeight="SemiBold" HorizontalAlignment="Center" Margin="0,8,0,0" />
                            </StackPanel>

                            <StackPanel Margin="8,0,8,0">
                                <Button x:Name="InfoNavButton" Tag="Information" Click="OnMenuClick" Style="{StaticResource NavButtonStyle}">
                                    <StackPanel Orientation="Horizontal"><TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE946;" Margin="0,0,10,0" /><TextBlock Text="Информация" /></StackPanel>
                                </Button>
                                <Button x:Name="AppsNavButton" Tag="Applications" Click="OnMenuClick" Style="{StaticResource NavButtonStyle}">
                                    <StackPanel Orientation="Horizontal"><TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xEA80;" Margin="0,0,10,0" /><TextBlock Text="Приложения" /></StackPanel>
                                </Button>
                                <Button x:Name="SystemNavButton" Tag="System" Click="OnMenuClick" Style="{StaticResource NavButtonStyle}">
                                    <StackPanel Orientation="Horizontal"><TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE770;" Margin="0,0,10,0" /><TextBlock Text="О системе" /></StackPanel>
                                </Button>
                                <Button x:Name="TwinksNavButton" Tag="Twinks" Click="OnMenuClick" Style="{StaticResource NavButtonStyle}">
                                    <StackPanel Orientation="Horizontal"><TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE77B;" Margin="0,0,10,0" /><TextBlock Text="Твинки" /></StackPanel>
                                </Button>
                                <Button x:Name="ModsNavButton" Tag="Mods" Click="OnMenuClick" Style="{StaticResource NavButtonStyle}">
                                    <StackPanel Orientation="Horizontal"><TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE7F8;" Margin="0,0,10,0" /><TextBlock Text="Mods" /></StackPanel>
                                </Button>
                                <Button x:Name="SettingsNavButton" Tag="Settings" Click="OnMenuClick" Style="{StaticResource NavButtonStyle}">
                                    <StackPanel Orientation="Horizontal"><TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE713;" Margin="0,0,10,0" /><TextBlock Text="Настройки" /></StackPanel>
                                </Button>
                            </StackPanel>
                        </StackPanel>
                        <StackPanel DockPanel.Dock="Bottom" Margin="8,0,8,16">
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                <Button Style="{StaticResource CircleLinkButtonStyle}"
                                        Background="#2F3DFF"
                                        BorderBrush="#5E6BFF"
                                        Content="TG"
                                        Margin="0,0,10,0"
                                        Click="OnOpenWebsiteClick" />
                                <Button Style="{StaticResource CircleLinkButtonStyle}"
                                        Background="#FF3E4A"
                                        BorderBrush="#FF6A74"
                                        Content="VK"
                                        Click="OnOpenVkClick" />
                            </StackPanel>
                        </StackPanel>
                    </DockPanel>
                </Border>

                <Grid Grid.Column="1" Background="{StaticResource BgMain}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <Border Grid.Row="0"
                            BorderBrush="#202020"
                            BorderThickness="0,0,0,1"
                            Background="#0F1011"
                            Padding="14,8,10,8"
                            MouseLeftButtonDown="OnTitleBarMouseDown">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                <TextBlock Text="AvnChecker" Foreground="{StaticResource Accent}" FontWeight="SemiBold" FontSize="16" Margin="0,0,12,0" />
                                <TextBlock x:Name="MainTitleText" Text="Информация" FontSize="16" FontWeight="SemiBold" />
                            </StackPanel>
                            <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                                <TextBlock Text="v1.0" Foreground="{StaticResource TextMuted}" Margin="0,0,8,0" VerticalAlignment="Center" />
                                <Button Style="{StaticResource TitleBarButtonStyle}" Click="OnMinimizeWindowClick">
                                    <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE921;" FontSize="10" />
                                </Button>
                                <Button Style="{StaticResource TitleBarButtonStyle}" Click="OnMaximizeWindowClick">
                                    <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE922;" FontSize="10" />
                                </Button>
                                <Button Style="{StaticResource CloseTitleBarButtonStyle}" Click="OnCloseWindowClick">
                                    <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE8BB;" FontSize="10" />
                                </Button>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                        <Grid Margin="14,12,14,14">
                            <Grid x:Name="InfoSection">
                                <StackPanel>
                                    <Border Style="{StaticResource PanelBorder}">
                                        <StackPanel>
                                            <TextBlock Foreground="{StaticResource Accent}" FontSize="18" FontWeight="SemiBold" Margin="0,0,0,12" Text="🕹  Информация о проверке" />
                                            <Grid>
                                                <Grid.ColumnDefinitions><ColumnDefinition Width="220" /><ColumnDefinition Width="*" /></Grid.ColumnDefinitions>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto"/><RowDefinition Height="Auto"/><RowDefinition Height="Auto"/><RowDefinition Height="Auto"/><RowDefinition Height="Auto"/><RowDefinition Height="Auto"/>
                                                </Grid.RowDefinitions>
                                                <TextBlock Grid.Row="0" Text="Статус:" Foreground="{StaticResource TextMuted}"/><TextBlock Grid.Row="0" Grid.Column="1" Text="Рабочий режим" Foreground="{StaticResource Accent}"/>
                                                <TextBlock Grid.Row="1" Text="Назначение:" Foreground="{StaticResource TextMuted}" Margin="0,7,0,0"/><TextBlock Grid.Row="1" Grid.Column="1" Text="Проверка игроков Minecraft" Margin="0,7,0,0"/>
                                                <TextBlock Grid.Row="2" Text="Тип:" Foreground="{StaticResource TextMuted}" Margin="0,7,0,0"/><TextBlock Grid.Row="2" Grid.Column="1" Text="Локальный чекер + Supabase" Margin="0,7,0,0"/>
                                                <TextBlock Grid.Row="3" Text="Разработчик:" Foreground="{StaticResource TextMuted}" Margin="0,7,0,0"/><TextBlock Grid.Row="3" Grid.Column="1" Text="Avn (@avnmanager)" Margin="0,7,0,0"/>
                                                <TextBlock Grid.Row="4" Text="Безопасность:" Foreground="{StaticResource TextMuted}" Margin="0,7,0,0"/><TextBlock Grid.Row="4" Grid.Column="1" Text="Без скрытых действий" Margin="0,7,0,0"/>
                                                <TextBlock Grid.Row="5" Text="Версия:" Foreground="{StaticResource TextMuted}" Margin="0,7,0,0"/><TextBlock Grid.Row="5" Grid.Column="1" Text="1.0.0" Margin="0,7,0,0"/>
                                            </Grid>
                                            <Button Content="Обновить" Style="{StaticResource ActionButtonStyle}" Width="150" Margin="0,16,0,0" Click="OnRefreshSystemClick" />
                                        </StackPanel>
                                    </Border>

                                    <Grid>
                                        <Grid.ColumnDefinitions><ColumnDefinition/><ColumnDefinition/></Grid.ColumnDefinitions>
                                        <Border Grid.Column="0" Style="{StaticResource PanelBorder}" Margin="0,0,6,0"><StackPanel><TextBlock Text="APP" Foreground="{StaticResource TextMuted}"/><TextBlock Text="AvnChecker" FontSize="28" FontWeight="SemiBold"/></StackPanel></Border>
                                        <Border Grid.Column="1" Style="{StaticResource PanelBorder}" Margin="6,0,0,0"><StackPanel><TextBlock Text="VERSION" Foreground="{StaticResource TextMuted}"/><TextBlock Text="1.0.0" FontSize="28" FontWeight="SemiBold"/></StackPanel></Border>
                                    </Grid>
                                </StackPanel>
                            </Grid>

                            <Grid x:Name="AppsSection" Visibility="Collapsed">
                                <StackPanel>
                                    <Border Style="{StaticResource PanelBorder}">
                                        <StackPanel>
                                            <TextBlock Foreground="{StaticResource Accent}" FontSize="18" FontWeight="SemiBold" Margin="0,0,0,12" Text="📦  Запуск приложений" />
                                            <ItemsControl ItemsSource="{Binding ToolItems}">
                                                <ItemsControl.ItemsPanel>
                                                    <ItemsPanelTemplate><WrapPanel /></ItemsPanelTemplate>
                                                </ItemsControl.ItemsPanel>
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate DataType="{x:Type models:ToolDownloadItem}">
                                                        <Border Background="#1B1208" BorderBrush="#54310D" BorderThickness="1" CornerRadius="8" Width="292" Height="72" Margin="0,0,10,10" Padding="10">
                                                            <Grid>
                                                                <Grid.ColumnDefinitions><ColumnDefinition/><ColumnDefinition Width="Auto"/></Grid.ColumnDefinitions>
                                                                <StackPanel>
                                                                    <TextBlock Text="{Binding Definition.Name}" FontSize="16" FontWeight="SemiBold" />
                                                                    <TextBlock Text="{Binding Status}" Foreground="{StaticResource Accent}" FontSize="13" />
                                                                </StackPanel>
                                                                <Button Grid.Column="1" Content="Скачать" Style="{StaticResource ActionButtonStyle}" Tag="{Binding}" Click="OnDownloadToolClick" Padding="8,4" />
                                                            </Grid>
                                                        </Border>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </Grid>

                            <Grid x:Name="SystemSection" Visibility="Collapsed">
                                <StackPanel>
                                    <Border Style="{StaticResource PanelBorder}">
                                        <StackPanel>
                                            <TextBlock Foreground="{StaticResource Accent}" FontSize="18" FontWeight="SemiBold" Margin="0,0,0,12" Text="🖥  Операционная система" />
                                            <Grid>
                                                <Grid.ColumnDefinitions><ColumnDefinition Width="250" /><ColumnDefinition Width="*" /></Grid.ColumnDefinitions>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto"/><RowDefinition Height="Auto"/><RowDefinition Height="Auto"/><RowDefinition Height="Auto"/><RowDefinition Height="Auto"/><RowDefinition Height="Auto"/><RowDefinition Height="Auto"/><RowDefinition Height="Auto"/><RowDefinition Height="Auto"/><RowDefinition Height="Auto"/><RowDefinition Height="Auto"/><RowDefinition Height="Auto"/>
                                                </Grid.RowDefinitions>
                                                <TextBlock Grid.Row="0" Text="Пользователь:" Foreground="{StaticResource TextMuted}"/><TextBlock Grid.Row="0" Grid.Column="1" x:Name="UserNameText"/>
                                                <TextBlock Grid.Row="1" Text="Имя ПК:" Foreground="{StaticResource TextMuted}" Margin="0,6,0,0"/><TextBlock Grid.Row="1" Grid.Column="1" x:Name="MachineNameText" Margin="0,6,0,0"/>
                                                <TextBlock Grid.Row="2" Text="Windows user:" Foreground="{StaticResource TextMuted}" Margin="0,6,0,0"/><TextBlock Grid.Row="2" Grid.Column="1" x:Name="WindowsUserText" Margin="0,6,0,0"/>
                                                <TextBlock Grid.Row="3" Text="Экраны:" Foreground="{StaticResource TextMuted}" Margin="0,6,0,0"/><TextBlock Grid.Row="3" Grid.Column="1" x:Name="ScreensCountText" Margin="0,6,0,0"/>
                                                <TextBlock Grid.Row="4" Text="Аптайм:" Foreground="{StaticResource TextMuted}" Margin="0,6,0,0"/><TextBlock Grid.Row="4" Grid.Column="1" x:Name="UptimeText" Margin="0,6,0,0"/>
                                                <TextBlock Grid.Row="5" Text="ОС:" Foreground="{StaticResource TextMuted}" Margin="0,6,0,0"/><TextBlock Grid.Row="5" Grid.Column="1" x:Name="OsNameText" Margin="0,6,0,0"/>
                                                <TextBlock Grid.Row="6" Text="Дата установки:" Foreground="{StaticResource TextMuted}" Margin="0,6,0,0"/><TextBlock Grid.Row="6" Grid.Column="1" x:Name="InstallDateText" Margin="0,6,0,0"/>
                                                <TextBlock Grid.Row="7" Text="Версия Windows:" Foreground="{StaticResource TextMuted}" Margin="0,6,0,0"/><TextBlock Grid.Row="7" Grid.Column="1" x:Name="WindowsVersionText" Margin="0,6,0,0"/>
                                                <TextBlock Grid.Row="8" Text="Сборка:" Foreground="{StaticResource TextMuted}" Margin="0,6,0,0"/><TextBlock Grid.Row="8" Grid.Column="1" x:Name="WindowsBuildText" Margin="0,6,0,0"/>
                                                <TextBlock Grid.Row="9" Text="CPU/GPU:" Foreground="{StaticResource TextMuted}" Margin="0,6,0,0"/><TextBlock Grid.Row="9" Grid.Column="1" x:Name="CpuText" Margin="0,6,0,0"/>
                                                <TextBlock Grid.Row="10" Text="GPU детали:" Foreground="{StaticResource TextMuted}" Margin="0,6,0,0"/><TextBlock Grid.Row="10" Grid.Column="1" x:Name="GpuText" Margin="0,6,0,0" TextWrapping="Wrap"/>
                                                <TextBlock Grid.Row="11" Text="Мат.плата / VM / HWID / Logs:" Foreground="{StaticResource TextMuted}" Margin="0,6,0,0"/><StackPanel Grid.Row="11" Grid.Column="1" Margin="0,6,0,0"><TextBlock x:Name="MotherboardText"/><TextBlock x:Name="VmText"/><TextBlock x:Name="HwidText" TextWrapping="Wrap"/><TextBlock x:Name="EventLogsText" TextWrapping="Wrap"/></StackPanel>
                                            </Grid>
                                            <StackPanel Orientation="Horizontal" Margin="0,14,0,0">
                                                <Border Width="74" Height="74" CornerRadius="37" Background="#1B1208" BorderBrush="#55320D" BorderThickness="1"><TextBlock x:Name="AvatarInitialText" FontSize="28" FontWeight="Bold" Foreground="{StaticResource Accent}" HorizontalAlignment="Center" VerticalAlignment="Center" Text="A"/></Border>
                                                <Button Content="Обновить" Style="{StaticResource ActionButtonStyle}" Width="150" Height="38" Margin="12,18,0,0" Click="OnRefreshSystemClick" />
                                            </StackPanel>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </Grid>
                            <Grid x:Name="TwinksSection" Visibility="Collapsed">
                                <StackPanel>
                                    <Border Style="{StaticResource PanelBorder}">
                                        <StackPanel>
                                            <TextBlock Foreground="{StaticResource Accent}" FontSize="18" FontWeight="SemiBold" Margin="0,0,0,12" Text="🎮  Твинки и аккаунты" />
                                            <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                                                <Button Content="Пересканировать" Style="{StaticResource ActionButtonStyle}" Click="OnRescanTwinksClick" Margin="0,0,8,0" />
                                                <Button Content="Скопировать" Style="{StaticResource ActionButtonStyle}" Click="OnCopyTwinksClick" Margin="0,0,8,0" />
                                                <Button Content="Скачать" Style="{StaticResource ActionButtonStyle}" Click="OnExportTwinksClick" />
                                                <TextBlock x:Name="TwinksStatusText" Foreground="{StaticResource TextMuted}" Margin="12,6,0,0" />
                                            </StackPanel>
                                            <DataGrid x:Name="TwinksGrid" Height="520" ItemsSource="{Binding Twinks}">
                                                <DataGrid.Columns>
                                                    <DataGridTextColumn Header="Ник" Binding="{Binding Nick}" Width="180" />
                                                    <DataGridTextColumn Header="Источник" Binding="{Binding Source}" Width="220" />
                                                    <DataGridTextColumn Header="Путь" Binding="{Binding Path}" Width="*" />
                                                </DataGrid.Columns>
                                            </DataGrid>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </Grid>

                            <Grid x:Name="ModsSection" Visibility="Collapsed">
                                <StackPanel>
                                    <Border Style="{StaticResource PanelBorder}">
                                        <StackPanel>
                                            <TextBlock Foreground="{StaticResource Accent}" FontSize="18" FontWeight="SemiBold" Margin="0,0,0,12" Text="📚  Mods и пакеты" />
                                            <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                                                <Button Content="Сканировать" Style="{StaticResource ActionButtonStyle}" Click="OnScanModsClick" Margin="0,0,8,0" />
                                                <TextBlock x:Name="ModsStatusText" Foreground="{StaticResource TextMuted}" Margin="0,6,0,0" />
                                            </StackPanel>
                                            <DataGrid x:Name="ModsGrid" Height="520" ItemsSource="{Binding Mods}" MouseDoubleClick="OnModsRowDoubleClick">
                                                <DataGrid.Columns>
                                                    <DataGridTextColumn Header="Файл" Binding="{Binding File}" Width="220" />
                                                    <DataGridTextColumn Header="Размер (МБ)" Binding="{Binding SizeMb}" Width="110" />
                                                    <DataGridTextColumn Header="Путь" Binding="{Binding Path}" Width="*" />
                                                    <DataGridTextColumn Header="Клиент" Binding="{Binding Client}" Width="120" />
                                                </DataGrid.Columns>
                                            </DataGrid>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </Grid>

                            <Grid x:Name="SettingsSection" Visibility="Collapsed">
                                <StackPanel>
                                    <Border Style="{StaticResource PanelBorder}">
                                        <StackPanel>
                                            <TextBlock Foreground="{StaticResource Accent}" FontSize="18" FontWeight="SemiBold" Margin="0,0,0,12" Text="⚙  Настройки и отправка" />
                                            <Grid Margin="0,0,0,12">
                                                <Grid.ColumnDefinitions><ColumnDefinition Width="240"/><ColumnDefinition Width="240"/><ColumnDefinition/></Grid.ColumnDefinitions>
                                                <StackPanel>
                                                    <TextBlock Text="Язык" Foreground="{StaticResource TextMuted}" />
                                                    <ComboBox x:Name="LanguageComboBox" Height="32" Margin="0,5,0,0"><ComboBoxItem Content="Russian" Tag="ru"/><ComboBoxItem Content="English" Tag="en"/></ComboBox>
                                                </StackPanel>
                                                <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                                    <TextBlock Text="Логирование" Foreground="{StaticResource TextMuted}" />
                                                    <ComboBox x:Name="LoggingModeComboBox" Height="32" Margin="0,5,0,0"><ComboBoxItem Content="minimal" Tag="minimal"/><ComboBoxItem Content="verbose" Tag="verbose"/></ComboBox>
                                                </StackPanel>
                                                <StackPanel Grid.Column="2" Margin="10,0,0,0">
                                                    <TextBlock Text="Кастомный путь" Foreground="{StaticResource TextMuted}" />
                                                    <StackPanel Orientation="Horizontal" Margin="0,5,0,0"><TextBox x:Name="CustomPathTextBox" Height="32" Width="290"/><Button Content="Добавить" Style="{StaticResource ActionButtonStyle}" Click="OnAddCustomPathClick" Margin="8,0,0,0"/></StackPanel>
                                                </StackPanel>
                                            </Grid>

                                            <Grid Margin="0,0,0,12">
                                                <Grid.ColumnDefinitions><ColumnDefinition/><ColumnDefinition Width="170"/></Grid.ColumnDefinitions>
                                                <ListBox x:Name="CustomPathsListBox" ItemsSource="{Binding CustomPaths}" Height="120" />
                                                <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                                    <Button Content="Удалить" Style="{StaticResource ActionButtonStyle}" Click="OnRemoveCustomPathClick" Margin="0,0,0,8"/>
                                                    <Button Content="Экспорт" Style="{StaticResource ActionButtonStyle}" Click="OnExportConfigClick" Margin="0,0,0,8"/>
                                                    <Button Content="Сброс" Style="{StaticResource ActionButtonStyle}" Click="OnResetConfigClick"/>
                                                </StackPanel>
                                            </Grid>

                                            <Grid>
                                                <Grid.ColumnDefinitions><ColumnDefinition Width="240"/><ColumnDefinition Width="220"/><ColumnDefinition/></Grid.ColumnDefinitions>
                                                <StackPanel><TextBlock Text="Ник игрока" Foreground="{StaticResource TextMuted}"/><TextBox x:Name="PlayerNickTextBox" Height="32" Margin="0,5,0,0"/></StackPanel>
                                                <StackPanel Grid.Column="1" Margin="10,0,0,0"><TextBlock Text="Статус" Foreground="{StaticResource TextMuted}"/><ComboBox x:Name="CheckStatusComboBox" Height="32" Margin="0,5,0,0"><ComboBoxItem Content="clean" Tag="clean"/><ComboBoxItem Content="probably_cheat" Tag="probably_cheat"/><ComboBoxItem Content="cheat" Tag="cheat"/></ComboBox></StackPanel>
                                                <StackPanel Grid.Column="2" Margin="10,0,0,0"><TextBlock Text="Комментарий" Foreground="{StaticResource TextMuted}"/><TextBox x:Name="NotesTextBox" Height="32" Margin="0,5,0,0"/></StackPanel>
                                            </Grid>

                                            <StackPanel Orientation="Horizontal" Margin="0,12,0,0">
                                                <Button Content="Собрать и отправить отчет" Style="{StaticResource ActionButtonStyle}" Click="OnSubmitCheckClick" Margin="0,0,8,0"/>
                                                <TextBlock x:Name="SubmitStatusText" Foreground="{StaticResource TextMuted}" Margin="0,6,0,0" />
                                            </StackPanel>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </Grid>
                        </Grid>
                    </ScrollViewer>
                </Grid>
            </Grid>
        </Border>

        <Grid x:Name="CodeOverlayPanel" Background="#F0080808">
            <Border Width="520" Padding="22" CornerRadius="14" Background="#101114" BorderBrush="#2A2E36" BorderThickness="1" HorizontalAlignment="Center" VerticalAlignment="Center">
                <StackPanel>
                    <TextBlock Text="Введите одноразовый код" FontSize="26" FontWeight="SemiBold" HorizontalAlignment="Center" />
                    <TextBlock Text="Код должен быть выдан через веб-панель" Foreground="{StaticResource TextMuted}" Margin="0,6,0,14" HorizontalAlignment="Center" />
                    <TextBox x:Name="AccessCodeTextBox"
                             Height="46"
                             FontSize="26"
                             CharacterCasing="Upper"
                             MaxLength="6"
                             HorizontalContentAlignment="Center"
                             VerticalContentAlignment="Center"
                             Background="#0C0D10"
                             Foreground="#EDEDED"
                             BorderBrush="#3A3F48"
                             BorderThickness="1.5"
                             CaretBrush="{StaticResource Accent}" />
                    <Button x:Name="ValidateCodeButton" Content="Подтвердить" Style="{StaticResource ActionButtonStyle}" Height="40" Margin="0,14,0,0" Click="OnValidateCodeClick" />
                    <TextBlock x:Name="CodeValidationText" Foreground="{StaticResource Accent}" Text="Ожидание кода" HorizontalAlignment="Center" Margin="0,12,0,0" />
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</Window>
